{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\lukin\\\\OneDrive\\\\INF\\\\Gourmet\\\\reactFrontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import{MainContainer,InputBar,InputWrapper,Button,MainButtonWrapper,ImagePreview,MainContent,FooterWrapper,ImageUploadContent,ImageButtonWrapper}from'./MainSectionDecorations';import'../Styles/suggestions.css';import Resizer from\"react-image-file-resizer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MainSection=function MainSection(){var backendURL='http://localhost:5000';//const backendURL = 'https://gourmet.hopto.org:5000'\nvar inputBarRef=useRef();//var foodNames = [\"kotlet\",\"buraczki\",\"mizeria\",\"arbuz\",\"mleko\",\"melon\",\"maliny\",\"maczek\",\"marucha\",\"marchew\",\"mango\",\"mus owocowy\",\"marmolada\",\"margaryna\",\"marcepan\"];\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),hover=_useState2[0],setHover=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),previewUrl=_useState4[0],setPreviewUrl=_useState4[1];var filePickerRef=useRef();var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),foodname=_useState6[0],setFoodName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),foodimage=_useState8[0],setFoodImage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),foodNames=_useState10[0],setFoodNames=_useState10[1];var onHover=function onHover(){setHover(!hover);};useEffect(function(){window.addEventListener('click',function(event){var container=document.getElementById('suggestionbox');var tmp=document.getElementsByClassName('suggestion-item');if(container!==null){if(!container.contains(event.target)&&tmp.length!==0){clearSuggestions();}}});},[]);function ImageHandler(event){var _this=this;if(event.target.files&&event.target.files.length===1){var file=event.target.files[0];Resizer.imageFileResizer(file,400,400,\"JPEG\",100,0,function(uri){//console.log(uri);\nvar base64String=uri.replace(\"data:\",\"\").replace(/^.+,/,\"\");console.log(base64String);setFoodImage(base64String);_this.setState({newImage:uri});},\"base64\",300,300);/*const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          const base64String = reader.result.replace(\"data:\", \"\").replace(/^.+,/, \"\");\r\n          setFoodImage(base64String);\r\n          //setFoodImage(file);\r\n        };\r\n        reader.readAsDataURL(file);\r\n        */setPreviewUrl(URL.createObjectURL(event.target.files[0]));document.getElementById(\"imgbtn\").innerText=\"Edytuj zdjęcie\";}}function pickedImageHandler(){filePickerRef.current.click();//wywolanie klikniecia inputu, ktory jest niewidzialny\n}function handleSubmit(){if(foodname===\"\"){alert('Nie wprowadzono żadnej nazwy!');}if(foodimage===\"\"){alert('Nie wybrano zdjęcia!');}else{alert('Podano następującą potrawę: '+foodname);handleRequest(foodname,foodimage);}}window.onload=function getSuggestions(){var xmlHttp=new XMLHttpRequest();xmlHttp.open(\"GET\",backendURL+'/suggestions',false);// false for synchronous request\nxmlHttp.send(null);var sug=JSON.parse(xmlHttp.response);setFoodNames(sug);};function handleRequest(foodname,foodimage){var xhttp=new XMLHttpRequest();var res;xhttp.open(\"POST\",backendURL+'/meals',true);var request={'mealName':foodname,'mealPhoto':foodimage};xhttp.onreadystatechange=function(){if(xhttp.readyState===4){res=JSON.parse(xhttp.response);console.log(res);alert(foodname+' został pomyślnie zapisany');setFoodNames(res);}};xhttp.setRequestHeader('Content-Type','application/json');xhttp.send(JSON.stringify(request));}function clearSuggestions(){var x=document.getElementsByClassName(\"suggestion-item\");var n=x.length;var y=document.getElementsByClassName(\"suggestion-list\");for(var i=0;i<n;i++){x[0].parentNode.removeChild(x[0]);}if(y.length!==0){y[0].parentNode.removeChild(y[0]);}}function handleChange(event){clearSuggestions();//getSuggestions();\nvar b,a;var inputValue=document.getElementById(\"foodinput\").value;if(inputValue!==''){a=document.createElement(\"ul\");a.setAttribute(\"class\",\"suggestion-list\");a.setAttribute(\"id\",\"suggestionbox\");document.getElementById('inputwrapper').appendChild(a);var actualHeight=0;for(var i=0;i<foodNames.length;i++){if(foodNames[i].substring(0,inputValue.length).toUpperCase()===inputValue.toUpperCase()&&inputValue!==''){b=document.createElement(\"li\");if(actualHeight<250){actualHeight+=43;}a.style.setProperty('--height',actualHeight+'px');b.innerHTML=\"<span class='firstLetter'>\"+foodNames[i].substring(0,inputValue.length)+\"</span>\";b.innerHTML+=foodNames[i].substring(inputValue.length,foodNames[i].length);b.innerHTML+=\"<input type='hidden' value='\"+foodNames[i]+\"'>\";b.setAttribute(\"class\",\"suggestion-item\");b.addEventListener(\"click\",function(e){document.getElementById('foodinput').value=this.getElementsByTagName(\"input\")[0].value;setFoodName(event.target.value);clearSuggestions();});a.appendChild(b);}}}setFoodName(event.target.value);//jeśli się stanie zdarzenie(OnChange), wez element który je spowodował(target) i jego wartość(value)\n}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(InputWrapper,{id:\"inputwrapper\",children:/*#__PURE__*/_jsx(InputBar,{id:\"foodinput\",ref:inputBarRef,value:foodname,type:\"text\",placeholder:\"Nazwij swoje jedzenie\",onChange:handleChange})}),/*#__PURE__*/_jsx(MainContent,{children:/*#__PURE__*/_jsx(MainButtonWrapper,{children:/*#__PURE__*/_jsx(Button,{type:\"submit\",value:\"Submit\",onMouseEnter:onHover,onMouseLeave:onHover,onClick:handleSubmit,children:\"Wy\\u015Blij\"})})}),/*#__PURE__*/_jsxs(ImageUploadContent,{children:[/*#__PURE__*/_jsxs(ImageButtonWrapper,{children:[/*#__PURE__*/_jsx(\"input\",{ref:filePickerRef,style:{display:\"none\"},type:\"file\",accept:\".jpg,.png,.jpeg\",onChange:ImageHandler}),/*#__PURE__*/_jsx(Button,{id:\"imgbtn\",type:\"button\",onMouseEnter:onHover,onMouseLeave:onHover,onClick:pickedImageHandler,children:\"Wybierz zdj\\u0119cie\"})]}),/*#__PURE__*/_jsx(ImagePreview,{children:/*#__PURE__*/_jsx(\"img\",{height:\"300px\",width:\"300px\",src:previewUrl,alt:\"preview\"})})]}),/*#__PURE__*/_jsx(FooterWrapper,{children:\"Jakub Sachajko & \\u0141ukasz Nied\\u017Awiadek \\xA9 2022\"})]})});};export default MainSection;","map":{"version":3,"sources":["C:/Users/lukin/OneDrive/INF/Gourmet/reactFrontend/src/Elements/MainSection/index.js"],"names":["React","useState","useRef","useEffect","MainContainer","InputBar","InputWrapper","Button","MainButtonWrapper","ImagePreview","MainContent","FooterWrapper","ImageUploadContent","ImageButtonWrapper","Resizer","MainSection","backendURL","inputBarRef","hover","setHover","previewUrl","setPreviewUrl","filePickerRef","foodname","setFoodName","foodimage","setFoodImage","foodNames","setFoodNames","onHover","window","addEventListener","event","container","document","getElementById","tmp","getElementsByClassName","contains","target","length","clearSuggestions","ImageHandler","files","file","imageFileResizer","uri","base64String","replace","console","log","setState","newImage","URL","createObjectURL","innerText","pickedImageHandler","current","click","handleSubmit","alert","handleRequest","onload","getSuggestions","xmlHttp","XMLHttpRequest","open","send","sug","JSON","parse","response","xhttp","res","request","onreadystatechange","readyState","setRequestHeader","stringify","x","n","y","i","parentNode","removeChild","handleChange","b","a","inputValue","value","createElement","setAttribute","appendChild","actualHeight","substring","toUpperCase","style","setProperty","innerHTML","e","getElementsByTagName","display"],"mappings":"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","sourcesContent":["import React, {useState, useRef, useEffect} from 'react'\r\nimport { MainContainer,InputBar, InputWrapper, Button,MainButtonWrapper,ImagePreview, MainContent,FooterWrapper,ImageUploadContent,ImageButtonWrapper} from './MainSectionDecorations'\r\nimport '../Styles/suggestions.css'\r\nimport Resizer from \"react-image-file-resizer\";\r\nconst MainSection = () => { \r\n    const backendURL =  'http://localhost:5000';\r\n    //const backendURL = 'https://gourmet.hopto.org:5000'\r\n    const inputBarRef = useRef();\r\n    //var foodNames = [\"kotlet\",\"buraczki\",\"mizeria\",\"arbuz\",\"mleko\",\"melon\",\"maliny\",\"maczek\",\"marucha\",\"marchew\",\"mango\",\"mus owocowy\",\"marmolada\",\"margaryna\",\"marcepan\"];\r\n    const [hover, setHover] = useState(false)\r\n    const [previewUrl,setPreviewUrl] = useState(null);\r\n    const filePickerRef = useRef();\r\n    const [foodname,setFoodName] = useState(\"\");\r\n    const [foodimage,setFoodImage] = useState(\"\");\r\n    const [foodNames,setFoodNames] = useState(\"\");\r\n    const onHover = () => {\r\n      setHover(!hover)\r\n    }\r\n    useEffect(() => {\r\n        window.addEventListener('click', (event) => {\r\n            var container = document.getElementById('suggestionbox');\r\n            var tmp = document.getElementsByClassName('suggestion-item');\r\n            if(container !== null)\r\n            {\r\n                if (!container.contains(event.target) && tmp.length !== 0) {\r\n                    clearSuggestions();\r\n                }\r\n            }\r\n            \r\n        });\r\n      }, []);\r\n    function ImageHandler(event) {\r\n      if(event.target.files && event.target.files.length===1 )\r\n      {\r\n        var file = event.target.files[0];\r\n        Resizer.imageFileResizer(\r\n            file,\r\n            400,\r\n            400,\r\n            \"JPEG\",\r\n            100,\r\n            0,\r\n            (uri) => {\r\n              //console.log(uri);\r\n              const base64String = uri.replace(\"data:\", \"\").replace(/^.+,/, \"\");\r\n              console.log(base64String)\r\n              setFoodImage(base64String);\r\n              this.setState({ newImage: uri });\r\n            },\r\n            \"base64\",\r\n            300,\r\n            300\r\n          ); \r\n        /*const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          const base64String = reader.result.replace(\"data:\", \"\").replace(/^.+,/, \"\");\r\n          setFoodImage(base64String);\r\n          //setFoodImage(file);\r\n        };\r\n        reader.readAsDataURL(file);\r\n        */\r\n        setPreviewUrl(URL.createObjectURL(event.target.files[0]));\r\n        document.getElementById(\"imgbtn\").innerText = \"Edytuj zdjęcie\";\r\n      }\r\n    }\r\n\r\n    function pickedImageHandler() {\r\n      filePickerRef.current.click(); //wywolanie klikniecia inputu, ktory jest niewidzialny\r\n    }\r\n    \r\n    function handleSubmit() {\r\n        if (foodname === \"\")\r\n        {\r\n            alert('Nie wprowadzono żadnej nazwy!');\r\n        }\r\n        if (foodimage === \"\")\r\n        {\r\n            alert('Nie wybrano zdjęcia!');\r\n        }\r\n        else\r\n        {\r\n            alert('Podano następującą potrawę: ' + foodname);\r\n            handleRequest(foodname,foodimage)\r\n        }\r\n      }\r\n    window.onload = function getSuggestions()\r\n    {\r\n        var xmlHttp = new XMLHttpRequest();\r\n        xmlHttp.open( \"GET\", backendURL + '/suggestions', false ); // false for synchronous request\r\n        xmlHttp.send( null );\r\n        var sug = JSON.parse(xmlHttp.response);\r\n        setFoodNames(sug)\r\n    }\r\n    function handleRequest(foodname,foodimage)\r\n    {\r\n        const xhttp = new XMLHttpRequest();\r\n        var res;\r\n        xhttp.open(\"POST\", backendURL + '/meals', true);\r\n        const request = {\r\n            'mealName': foodname,\r\n            'mealPhoto': foodimage,\r\n        };\r\n        xhttp.onreadystatechange = function() {\r\n            if (xhttp.readyState === 4) {\r\n            res = JSON.parse(xhttp.response)\r\n            console.log(res)\r\n            alert(foodname + ' został pomyślnie zapisany');\r\n            setFoodNames(res)\r\n            }\r\n        }\r\n        xhttp.setRequestHeader('Content-Type', 'application/json');\r\n        xhttp.send(JSON.stringify(request));\r\n    }\r\n    function clearSuggestions() {\r\n        var x = document.getElementsByClassName(\"suggestion-item\");\r\n        var n = x.length;\r\n        var y = document.getElementsByClassName(\"suggestion-list\");\r\n        for (var i = 0; i < n; i++) {\r\n            x[0].parentNode.removeChild(x[0]);\r\n        }\r\n        if(y.length !== 0)\r\n        {\r\n            y[0].parentNode.removeChild(y[0]);\r\n        }\r\n        \r\n    }\r\n\r\n    function handleChange(event) {\r\n        clearSuggestions();\r\n        //getSuggestions();\r\n        var b,a; \r\n        var inputValue = document.getElementById(\"foodinput\").value;\r\n        if(inputValue !== '')\r\n        {\r\n            a = document.createElement(\"ul\")\r\n            a.setAttribute(\"class\", \"suggestion-list\");\r\n            a.setAttribute(\"id\", \"suggestionbox\");\r\n            document.getElementById('inputwrapper').appendChild(a);\r\n            var actualHeight = 0;\r\n            for (var i = 0; i < foodNames.length; i++)\r\n            {\r\n                if(foodNames[i].substring(0,inputValue.length).toUpperCase() === inputValue.toUpperCase() && inputValue !== '')\r\n                {\r\n                    b = document.createElement(\"li\");\r\n                    if(actualHeight < 250)\r\n                    {\r\n                        actualHeight += 43;\r\n                    }\r\n                    a.style.setProperty('--height',actualHeight+'px')\r\n                    b.innerHTML=\"<span class='firstLetter'>\" + foodNames[i].substring(0,inputValue.length) + \"</span>\";\r\n                    b.innerHTML += foodNames[i].substring(inputValue.length,foodNames[i].length);\r\n                    b.innerHTML += \"<input type='hidden' value='\" + foodNames[i] + \"'>\";\r\n                    b.setAttribute(\"class\", \"suggestion-item\");\r\n                    b.addEventListener(\"click\", function(e) {\r\n                        document.getElementById('foodinput').value = this.getElementsByTagName(\"input\")[0].value;\r\n                        setFoodName(event.target.value);\r\n                        clearSuggestions();\r\n                    });\r\n                    a.appendChild(b);\r\n                }\r\n            }\r\n        }\r\n        setFoodName(event.target.value); //jeśli się stanie zdarzenie(OnChange), wez element który je spowodował(target) i jego wartość(value)\r\n    }\r\n    return (\r\n        <>\r\n        <MainContainer>\r\n            {/* obniżyć przycisk wybierz zdjęcie, na urządzeniach mobilnych zmiejszyć imagepreview */}\r\n            {/* <Autocomplete suggestions={[\"Oranges\", \"Orangutan\", \"Apples\", \"Banana\", \"Kiwi\", \"Mango\"]}/> */}\r\n            <InputWrapper id=\"inputwrapper\">\r\n                {/* <SuggestionList id=\"suggestionbox\"/> */}\r\n                <InputBar id=\"foodinput\" ref={inputBarRef} value={foodname} type=\"text\" placeholder='Nazwij swoje jedzenie' onChange={handleChange}/>\r\n            </InputWrapper>\r\n            \r\n            <MainContent>\r\n                <MainButtonWrapper>\r\n                  <Button type=\"submit\" value=\"Submit\" onMouseEnter={onHover} onMouseLeave={onHover} onClick={handleSubmit}>\r\n                      Wyślij\r\n                  </Button>\r\n                </MainButtonWrapper>     \r\n            </MainContent>   \r\n            <ImageUploadContent>\r\n                <ImageButtonWrapper>\r\n                <input ref = {filePickerRef} style = {{display:\"none\"}} type = \"file\" accept=\".jpg,.png,.jpeg\" onChange={ImageHandler} />\r\n                    <Button id=\"imgbtn\" type=\"button\" onMouseEnter={onHover} onMouseLeave={onHover} onClick={pickedImageHandler}>\r\n                        Wybierz zdjęcie \r\n                    </Button>\r\n                </ImageButtonWrapper>\r\n                <ImagePreview>\r\n                    <img height=\"300px\" width=\"300px\" src={previewUrl} alt=\"preview\"/>\r\n                </ImagePreview>\r\n            </ImageUploadContent>\r\n\r\n            <FooterWrapper>Jakub Sachajko & Łukasz Niedźwiadek © 2022</FooterWrapper>\r\n        </MainContainer>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MainSection"]},"metadata":{},"sourceType":"module"}