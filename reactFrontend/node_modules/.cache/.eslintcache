[{"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\index.js":"1","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\App.js":"2","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Pages\\info.js":"3","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Pages\\identifier.js":"4","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Pages\\index.js":"5","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\NavBar\\index.js":"6","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\SideBar\\index.js":"7","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\NavBar\\NavBarDecorations.js":"8","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\SideBar\\SideBarDecorations.js":"9","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\InfoSection\\index.js":"10","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\MainSection\\index.js":"11","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\InfoSection\\InfoSectionDecararion.js":"12","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\MainSection\\MainSectionDecorations.js":"13","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Functions\\upload.js":"14"},{"size":207,"mtime":1646817745075,"results":"15","hashOfConfig":"16"},{"size":944,"mtime":1646817745043,"results":"17","hashOfConfig":"16"},{"size":206,"mtime":1646817745074,"results":"18","hashOfConfig":"16"},{"size":119,"mtime":1646817745069,"results":"19","hashOfConfig":"16"},{"size":268,"mtime":1646817745072,"results":"20","hashOfConfig":"16"},{"size":1138,"mtime":1646817745058,"results":"21","hashOfConfig":"16"},{"size":942,"mtime":1646817745061,"results":"22","hashOfConfig":"16"},{"size":2573,"mtime":1646817745056,"results":"23","hashOfConfig":"16"},{"size":2215,"mtime":1646817745060,"results":"24","hashOfConfig":"16"},{"size":1090,"mtime":1646817745047,"results":"25","hashOfConfig":"16"},{"size":7302,"mtime":1646819337670,"results":"26","hashOfConfig":"16"},{"size":349,"mtime":1646817745045,"results":"27","hashOfConfig":"16"},{"size":5083,"mtime":1646817745049,"results":"28","hashOfConfig":"16"},{"size":611,"mtime":1646817751544,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1pgu899",{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52"},{"filePath":"53","messages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\index.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\App.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Pages\\info.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Pages\\identifier.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Pages\\index.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\NavBar\\index.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\SideBar\\index.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\NavBar\\NavBarDecorations.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\SideBar\\SideBarDecorations.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\InfoSection\\index.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\MainSection\\index.js",["59"],"import React, {useState, useRef, useEffect} from 'react'\r\nimport { MainContainer,InputBar, InputWrapper, Button,MainButtonWrapper,ImagePreview, MainContent,FooterWrapper,ImageUploadContent,ImageButtonWrapper} from './MainSectionDecorations'\r\nimport '../Styles/suggestions.css'\r\nimport {sendToServer} from '../../Functions/upload'\r\nconst MainSection = () => { \r\n    const inputBarRef = useRef();\r\n    //var foodNames = [\"kotlet\",\"buraczki\",\"mizeria\",\"arbuz\",\"mleko\",\"melon\",\"maliny\",\"maczek\",\"marucha\",\"marchew\",\"mango\",\"mus owocowy\",\"marmolada\",\"margaryna\",\"marcepan\"];\r\n    const [hover, setHover] = useState(false)\r\n    const [previewUrl,setPreviewUrl] = useState(null);\r\n    const filePickerRef = useRef();\r\n    const [foodname,setFoodName] = useState(\"\");\r\n    const [foodimage,setFoodImage] = useState(\"\");\r\n    const [foodNames,setFoodNames] = useState(\"\");\r\n    const onHover = () => {\r\n      setHover(!hover)\r\n    }\r\n    useEffect(() => {\r\n        window.addEventListener('click', (event) => {\r\n            var container = document.getElementById('suggestionbox');\r\n            var tmp = document.getElementsByClassName('suggestion-item');\r\n            if(container !== null)\r\n            {\r\n                if (!container.contains(event.target) && tmp.length !== 0) {\r\n                    clearSuggestions();\r\n                }\r\n            }\r\n            \r\n        });\r\n      }, []);\r\n    function ImageHandler(event) {\r\n      if(event.target.files && event.target.files.length===1 )\r\n      {\r\n          \r\n        var file = event.target.files[0];\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          const base64String = reader.result.replace(\"data:\", \"\").replace(/^.+,/, \"\");\r\n          setFoodImage(base64String);\r\n          //setFoodImage(file);\r\n        };\r\n        reader.readAsDataURL(file);\r\n\r\n\r\n        setPreviewUrl(URL.createObjectURL(event.target.files[0]));\r\n        document.getElementById(\"imgbtn\").innerText = \"Edytuj zdjęcie\";\r\n      }\r\n    }\r\n\r\n    function pickedImageHandler() {\r\n      filePickerRef.current.click(); //wywolanie klikniecia inputu, ktory jest niewidzialny\r\n    }\r\n    \r\n    function handleSubmit() {\r\n        if (foodname === \"\")\r\n        {\r\n            alert('Nie wprowadzono żadnej nazwy!');\r\n        }\r\n        if (foodimage === \"\")\r\n        {\r\n            alert('Nie wybrano zdjęcia!');\r\n        }\r\n        else\r\n        {\r\n            alert('Podano następującą potrawę: ' + foodname);\r\n            //var tmp = sendToServer(foodname,foodimage);\r\n            handleRequest(foodname,foodimage)\r\n            //setFoodNames(tmp)\r\n        }\r\n      }\r\n    function handleRequest(foodname,foodimage)\r\n    {\r\n        const backend = 'http://localhost:5000'\r\n        const xhttp = new XMLHttpRequest();\r\n        var res;\r\n        xhttp.open(\"POST\", backend + '/meals', true);\r\n        const request = {\r\n            'mealName': foodname,\r\n            'mealPhoto': foodimage,\r\n        };\r\n        xhttp.onreadystatechange = function() {\r\n            if (xhttp.readyState === 4) {\r\n            res = JSON.parse(xhttp.response)\r\n            console.log(res)\r\n            setFoodNames(res)\r\n            }\r\n        }\r\n        xhttp.setRequestHeader('Content-Type', 'application/json');\r\n        xhttp.send(JSON.stringify(request));\r\n    }\r\n    function clearSuggestions() {\r\n        var x = document.getElementsByClassName(\"suggestion-item\");\r\n        var n = x.length;\r\n        var y = document.getElementsByClassName(\"suggestion-list\");\r\n        for (var i = 0; i < n; i++) {\r\n            x[0].parentNode.removeChild(x[0]);\r\n        }\r\n        if(y.length !== 0)\r\n        {\r\n            y[0].parentNode.removeChild(y[0]);\r\n        }\r\n        \r\n    }\r\n\r\n    function handleChange(event) {\r\n        clearSuggestions();\r\n        var b,a; \r\n        var inputValue = document.getElementById(\"foodinput\").value;\r\n        if(inputValue !== '')\r\n        {\r\n            a = document.createElement(\"ul\")\r\n            a.setAttribute(\"class\", \"suggestion-list\");\r\n            a.setAttribute(\"id\", \"suggestionbox\");\r\n            document.getElementById('inputwrapper').appendChild(a);\r\n            var actualHeight = 0;\r\n            for (var i = 0; i < foodNames.length; i++)\r\n            {\r\n                if(foodNames[i].substring(0,inputValue.length).toUpperCase() === inputValue.toUpperCase() && inputValue !== '')\r\n                {\r\n                    b = document.createElement(\"li\");\r\n                    if(actualHeight < 250)\r\n                    {\r\n                        actualHeight += 43;\r\n                    }\r\n                    a.style.setProperty('--height',actualHeight+'px')\r\n                    b.innerHTML=\"<span class='firstLetter'>\" + foodNames[i].substring(0,inputValue.length) + \"</span>\";\r\n                    b.innerHTML += foodNames[i].substring(inputValue.length,foodNames[i].length);\r\n                    b.innerHTML += \"<input type='hidden' value='\" + foodNames[i] + \"'>\";\r\n                    b.setAttribute(\"class\", \"suggestion-item\");\r\n                    b.addEventListener(\"click\", function(e) {\r\n                        document.getElementById('foodinput').value = this.getElementsByTagName(\"input\")[0].value;\r\n                        setFoodName(event.target.value);\r\n                        clearSuggestions();\r\n                    });\r\n                    a.appendChild(b);\r\n                }\r\n            }\r\n        }\r\n        setFoodName(event.target.value); //jeśli się stanie zdarzenie(OnChange), wez element który je spowodował(target) i jego wartość(value)\r\n    }\r\n    return (\r\n        <>\r\n        <MainContainer>\r\n            {/* obniżyć przycisk wybierz zdjęcie, na urządzeniach mobilnych zmiejszyć imagepreview */}\r\n            {/* <Autocomplete suggestions={[\"Oranges\", \"Orangutan\", \"Apples\", \"Banana\", \"Kiwi\", \"Mango\"]}/> */}\r\n            <InputWrapper id=\"inputwrapper\">\r\n                {/* <SuggestionList id=\"suggestionbox\"/> */}\r\n                <InputBar id=\"foodinput\" ref={inputBarRef} value={foodname} type=\"text\" placeholder='Nazwij swoje jedzenie' onChange={handleChange}/>\r\n            </InputWrapper>\r\n            \r\n            <MainContent>\r\n                <MainButtonWrapper>\r\n                  <Button type=\"submit\" value=\"Submit\" onMouseEnter={onHover} onMouseLeave={onHover} onClick={handleSubmit}>\r\n                      Wyślij\r\n                  </Button>\r\n                </MainButtonWrapper>     \r\n            </MainContent>   \r\n            <ImageUploadContent>\r\n                <ImageButtonWrapper>\r\n                <input ref = {filePickerRef} style = {{display:\"none\"}} type = \"file\" accept=\".jpg,.png,.jpeg\" onChange={ImageHandler} />\r\n                    <Button id=\"imgbtn\" type=\"button\" onMouseEnter={onHover} onMouseLeave={onHover} onClick={pickedImageHandler}>\r\n                        Wybierz zdjęcie \r\n                    </Button>\r\n                </ImageButtonWrapper>\r\n                <ImagePreview>\r\n                    <img height=\"300px\" width=\"300px\" src={previewUrl} alt=\"preview\"/>\r\n                </ImagePreview>\r\n            </ImageUploadContent>\r\n\r\n            <FooterWrapper>Jakub Sachajko & Łukasz Niedźwiadek © 2022</FooterWrapper>\r\n        </MainContainer>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MainSection","C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\InfoSection\\InfoSectionDecararion.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Elements\\MainSection\\MainSectionDecorations.js",[],"C:\\Users\\lukin\\OneDrive\\INF\\Gourmet\\reactFrontend\\src\\Functions\\upload.js",[],{"ruleId":"60","severity":1,"message":"61","line":4,"column":9,"nodeType":"62","messageId":"63","endLine":4,"endColumn":21},"no-unused-vars","'sendToServer' is defined but never used.","Identifier","unusedVar"]